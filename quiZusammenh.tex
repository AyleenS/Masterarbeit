\section{Zusammenhänge}

\begin{Satz}[Zusammenhang der Verfeinerungs-Relationenen mit der
  Stillstands-Relation]
  \label{ZusammenhStilleSatz}
  Für \MEIO{}s $P$ und $Q$ gilt $P \wasRel Q \Rightarrow P \QRel Q \Rightarrow
  P \ERel Q$. Die Implikationen in die andere Richtung gelten jedoch nicht.
\end{Satz}
\begin{proof}\mbox{}\\
  $P \wasRel Q \Rightarrow P \QRel Q$:\\
  Im Beweis des Satzes~\ref{ZusammenhFehlerSatz} wurde bereits bewiesen, dass
  eine schwache as"=Verfeinerungs"=Relation $\mathcal{R}$ zwischen $P$ und $Q$
  die Eigenschaften der Fehler"=Relation \ERel{} erfüllt. Es fehlt für diese
  Implikation also nur noch der Beweis der Inklusion $\QET _P \subseteq \QET
  _Q$. Da bereits $\ET _P\subseteq \ET _Q$ beweisen wurde, reicht es aus zu
  beweisen, dass $\StQT _P \backslash \ET _P\subseteq \QET _Q$ gilt. Für ein
  Wort $w$ aus $\StQT _P \backslash \ET _P$ gilt: $\exists w'\in\Sigma _{\tau}
  ^*, \exists p_1, p_2, \dots , p_n, \exists \alpha _1, \alpha _2, \dots
  ,\alpha _n: \hat{w'} = w \land w' = \alpha _1\alpha _2\dots\alpha _n \land
  p_0 \may[\alpha _1]_P p_1 \may[\alpha _2]_P \dots p_{n-1} \may[\alpha _n]_P
  p_n \in Qui _P$. Aufgrund von~\ref{wSimDef}.4 bzw.~\ref{wSimDef}.5 gibt es einen
  analogen Trace in $Q$, falls kein $q_j$ für $0\leq j \leq n$ in $E_Q$
  angetroffen wird. Es gilt $w\in\StET _Q\subseteq\ET _Q\subseteq\QET _Q$,
  falls ein Fehler-Zustand in $Q$ auf einem Präfix-Trace von $w$ auftritt. Im
  folgenden wird davon ausgegangen, das $w$ in $Q$ ohne das erreichen eines
  Fehler"=Zustandes ausführbar ist. Es gibt also einen Trace der Form $q_0
  \weakmay[\widehat{\alpha _1}]_Q q_1 \weakmay[\widehat{\alpha _2}]_Q \dots
  q_{n-1} \weakmay[\widehat{\alpha _n}]_Q q_n$ in $Q$ mit $p_j \mathcal{R} q_j$
  für alle $j$ aus $\{0,1,\dots n\}$. $p_n$ ist für $P$ ein stiller Zustand, es
  gilt also für alle $\omega \in (O\cup \{\tau\})$ $p_n \nmust[\omega]_P$. Da
  $\mathcal{R}$ eine schwache as"=Verfeinerungs"=Relation ist, muss
  wegen~\ref{wSimDef}.3 auch $q_n \nmust[\omega]_Q$ gelten für alle $\omega
  \in (O\cup \{\tau\})$. $q_n$ ist also auch ein stiller Zustand. Somit ist $w$
  in $\StQT _Q\subseteq\QET _Q$ enthalten.

  $P \QRel Q \Rightarrow P \ERel Q$:\\
  Diese Implikation folgt direkt aus der Definition von \QRel{}
  in~\ref{StilleSemDef}. Da $P \QRel Q$ dort definiert wurde als Relation, die
  $P \ERel Q$ und $\QET _P \subseteq \QET _Q$ erfüllt. Es gilt also $P \ERel Q$.

  $P \wasRel Q \hspace{0.1cm}\not\hspace{-0.1cm}\Leftarrow P \QRel Q$:\\
  Wie im Gegenbeispiel für die analoge Implikation aus der Relation \ERel{}
  beruht der Grund für die nicht Gültigkeit hier auch darauf, dass Simulationen
  strenger sind als Sprach Inklusionen. Jedoch funktioniert hier nicht das
  gleiche Gegenbeispiel wie im letzten Kapitel, da es zu Problemen mit den
  Stille-Traces führen würde. Um diese zu vermeiden, wird wieder die Technik
  angewendet an alle Zustände eine $\tau$-Schleife anzufügen. Das daraus
  entstehende Gegenbeispiel ist in Abbildung~\ref{WasQuiGegenBsp} dargestellt.
  Die Menge der Inputs $I$ der beiden \MEIO{}s ist leer. Es gilt also $\ET _P =
  \ET _Q = \QET _P = \QET _Q = \emptyset$ und $\{\varepsilon\} = L(P) \subset
  L(Q) = \{\varepsilon , o\}$.\\
  Angenommen es gib eine schwache as"=Verfeinerungs"=Relation $\mathcal{R}$
  zwischen $P$ und $Q$. Dann stehen die Startzustände in dieser Relation, es
  gilt also $p_0 \mathcal{R} q_0$. Da es keine Fehler"=Zustände in $P$ gibt,
  ist~\ref{wSimDef}.1 erfüllt. Die Transition $q_0 \must[o]_Q q_1$ fordert
  durch~\ref{wSimDef}.3 ihre Verfeinerung in $P$. Da es jedoch keine mit $o$
  beschriftete Transition in $P$ gibt, kann $\mathcal{R}$ keine
  as"=Verfeinerungs"=Relation zwischen $P$ und $Q$ sein.

  \begin{figure}[htbp]
    \begin{center}
      \begin{tikzpicture}[->, >=latex', auto,node distance=2.5cm, semithick]
        \node [initial,initial text=$Q$:] (q0) at (0,0) {$q_0$};
        \node (q1) [right of=q0] {$q_1$};

        \path
        (q0) edge node{$o!$} (q1)
        (q0) edge[loop above] node{$\tau$} (q0)
        (q1) edge[loop right] node{$\tau$} (q1)
        ;

        \node [initial,initial text=$P$:] (p0) at (7,0) {$p_0$};

        \path
        (p0) edge[loop right] node{$\tau$} (p0)
        ;
      \end{tikzpicture}
      \caption{Gegenbeispiel zu $\wasRel \Leftarrow \QRel$}
      \label{WasQuiGegenBsp}
    \end{center}
  \end{figure}

  $P \QRel Q \hspace{0.1cm}\not\hspace{-0.1cm}\Leftarrow P \ERel Q$:\\
  Die Relation \QRel{} stützt sich auf die Definition der Relation \ERel{}.
  Jedoch erweitert sich die Definition noch um eine weiter Voraussetzung. Es
  muss also in einem entsprechenden Gegenbeispiel die Inklusion $\QET _P
  \subseteq \QET _Q$ verletzt sein. Das Gegenbeispiel ist in
  Abbildung~\ref{QuiEGegenBsp} dargestellt. Es wird $I = \emptyset$
  vorausgesetzt, damit keine Input-kritischen Traces auftreten. Es gilt also
  $\ET _P = \ET _Q = \emptyset$ und $L(P) = L(Q) = \{\varepsilon\}$. Es gilt
  also $P\ERel Q$.\\
  Jedoch gilt für die strickten Stille-Traces $\StQT _P = \{\varepsilon\}$ und
  $\StQT _Q = \emptyset$. Es folgt also $\QET _P \not\subseteq \QET _Q$ und
  somit ist die Relation \QRel{} zwischen $P$ und $Q$ auch nicht erfüllt.

  \begin{figure}[htbp]
    \begin{center}
      \begin{tikzpicture}[->, >=latex', auto,node distance=2.5cm, semithick]
        \node [initial,initial text=$Q$:] (q0) at (0,0) {$q_0$};

        \node [initial,initial text=$P$:] (p0) at (7,0) {$p_0$};

        \path
        (p0) edge[loop right] node{$\tau$} (p0)
        ;

      \end{tikzpicture}
      \caption{Gegenbeispiel zu $\QRel \Leftarrow \ERel$ mit $I_P = I_Q =
      \emptyset$}
      \label{QuiEGegenBsp}
    \end{center}
  \end{figure}
\end{proof}

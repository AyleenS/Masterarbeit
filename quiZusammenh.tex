\section{Zusammenhänge}

\begin{Satz}[Zusammenhang der Verfeinerungs-Relationenen mit der
  Stillstands-Relation]
  \label{ZusammenhStilleSatz}
  Für \MEIO{}s $P$ und $Q$ gilt $P \asRel Q \Rightarrow P \QRel Q \Rightarrow
  P \ERel Q$. Die Implikationen in die andere Richtung gelten jedoch nicht. Die
  Relationen \wasRel{} und \QRel{} sind unvergleichbar.
\end{Satz}
\begin{proof}\mbox{}\\
  $P \asRel Q \Rightarrow P \QRel Q$:\\
  Im Beweis des Satzes~\ref{ZusammenhFehlerSatz} wurde bereits bewiesen, dass
  eine schwache as"=Verfeinerungs"=Relation $\mathcal{R}$ zwischen $P$ und $Q$
  die Eigenschaften der Fehler"=Relation \ERel{} erfüllt. Nach
  Lemma~\ref{ZusammenhWasAsLem} ist jede starke as"=Verfeinerungs"=Relation
  auch eine schwache. Es fehlt also für diese Implikation nur noch der Beweis
  der Inklusion $\QET _P \subseteq \QET _Q$. Da bereits $\ET _P\subseteq \ET
  _Q$ beweisen wurde, reicht es aus zu beweisen, dass $\StQT _P \backslash \ET
  _P\subseteq \QET _Q$ gilt. Die as"=Verfeinerungs"=Relation $\mathcal{R}$
  zwischen $P$ und $Q$ ist in diesem Fall als stark anzunehmen. Für ein Wort
  $w$ aus $\StQT _P \backslash \ET _P$ gibt es einen ausführbaren Trace der
  Form wie in Lemma~\ref{AblaefeVerfSpezLem}, der mit $p_n$ einen stillen
  Zustand erreicht. Es gilt $w\in\cont (\StET _Q) \subseteq\ET _Q\subseteq\QET
  _Q$, falls ein Fehler-Zustand in $Q$ auf einem Präfix-Trace von $w$ auftritt,
  wegen Lemma~\ref{AblaefeVerfSpezLem}. Im folgenden wird davon ausgegangen,
  das $w$ in $Q$ ohne das erreichen eines Fehler"=Zustandes ausführbar ist.
  Wegen~\ref{AblaefeVerfSpezLem} gibt es also einen Trace für $w$ in $Q$, der
  im Zustand $q_n$ mit $p_n \mathcal{R} q_n$ endet. $p_n$ ist für $P$ ein
  stiller Zustand, es gilt also für alle $\omega \in (O\cup \{\tau\})$ $p_n
  \nmust[\omega]_P$. Da $\mathcal{R}$ eine starke as"=Verfeinerungs"=Relation
  ist, muss wegen~\ref{SimDef}.2 auch $q_n \nmust[\omega]_Q$ gelten für alle
  $\omega \in (O\cup \{\tau\})$. $q_n$ ist also auch ein stiller Zustand. Somit
  ist $w$ in $\StQT _Q\subseteq\QET _Q$ enthalten.

  $P \QRel Q \Rightarrow P \ERel Q$:\\
  Diese Implikation folgt direkt aus der Definition von \QRel{}
  in~\ref{StilleSemDef}. Da $P \QRel Q$ dort definiert wurde als Relation, die
  $P \ERel Q$ und $\QET _P \subseteq \QET _Q$ erfüllt. Es gilt also $P \ERel Q$.

  $P \wasRel Q \not\Rightarrow P \QRel Q$:\\
  Diese Implikation scheitert dran, dass für stille Zustände keine
  $\tau$"=must"=Transitionen zulässig sind und \QRel{} keine Divergenz mit
  betrachtet. Ein entsprechenden Gegenbeispiel ist in
  Abbildung~\ref{QuiWasGegenBsp} dargestellt. Da hier nur das die strikten
  Stille Trace das Problem erzeugen, soll $I = \emptyset$ gelten, damit die
  \MIT{}-Mengen für beide Systeme leer sind. $\mathcal{R} = \{(p_0,q_0)\}$ ist
  eine schwache as"=Verfeinerungs"=Relation zwischen $P$ und $Q$. Beides
  Transitionssysteme enthalten keine Fehler"=Zustände, $P$ besitzt keine
  Transitionen und $Q$ nur eine Transition für eine interne Aktion, somit sind
  die Punkt 1.,2.,4.\ und 5.\ der Definition~\ref{wSimDef} für $\mathcal{R}$
  sicher erfüllt. Der dritte Punkt von~\ref{wSimDef} fordert, dass die
  Transition $q_0 \must[\tau]_Q q_0$ in $P$ schwach gematched wird. Da
  $\hat{\tau}$ jedoch $\varepsilon$ entspricht, muss es keine echte interne
  Transition in $P$ für $p_0$ geben. Die Definition~\ref{wSimDef}.3 ist also
  ebenfalls durch das bereits enthaltene Tupel $(p_0,q_0)$ erfüllt.\\
  Für $P$ ist $\varepsilon$ ein strikten Stille"=Trace. Die Menge $\StQT (Q) =
  \QET (Q)$ ist jedoch leer. Die Inklusion $\QET (P) \subset \QET (Q)$, die für
  $P\QRel Q$ gelten müsste ist also nicht erfüllt.

  \begin{figure}[htbp]
    \begin{center}
      \begin{tikzpicture}[->, >=latex', auto,node distance=2.5cm, semithick]
        \node [initial,initial text=$P$:, rectangle, draw, dotted] (p0) at
        (0,0) {$p_0\in Qui _P$};

        \node [initial,initial text=$Q$:] (q0) at (7,0) {$q_0$};

        \path
        (q0) edge[loop right] node{$\tau$} (q0)
        ;
      \end{tikzpicture}
      \caption{Gegenbeispiel zu $\wasRel \Rightarrow \QRel$ mit $I_P = I_Q =
      \emptyset$}
      \label{QuiWasGegenBsp}
    \end{center}
  \end{figure}

  $P \wasRel Q \hspace{0.1cm}\not\hspace{-0.1cm}\Leftarrow P \QRel Q$:\\
  Wie im Gegenbeispiel für die analoge Implikation aus der Relation \ERel{}
  beruht der Grund für die nicht Gültigkeit hier auch darauf, dass Simulationen
  strenger sind als Sprach Inklusionen. Jedoch funktioniert hier nicht das
  gleiche Gegenbeispiel wie im letzten Kapitel, da es zu Problemen mit den
  Stille-Traces führen würde. Um diese zu vermeiden, wird wieder die Technik
  angewendet an alle Zustände eine $\tau$-Schleife anzufügen. Das daraus
  entstehende Gegenbeispiel ist in Abbildung~\ref{WasQuiGegenBsp} dargestellt.
  Die Menge der Inputs $I$ der beiden \MEIO{}s ist leer. Es gilt also $\ET _P =
  \ET _Q = \QET _P = \QET _Q = \emptyset$ und $\{\varepsilon\} = L(P) \subset
  L(Q) = \{\varepsilon , o\}$.\\
  Angenommen es gib eine schwache as"=Verfeinerungs"=Relation $\mathcal{R}$
  zwischen $P$ und $Q$. Dann stehen die Startzustände in dieser Relation, es
  gilt also $p_0 \mathcal{R} q_0$. Da es keine Fehler"=Zustände in $P$ gibt,
  ist~\ref{wSimDef}.1 erfüllt. Die Transition $q_0 \must[o]_Q q_1$ fordert
  durch~\ref{wSimDef}.3 ihre Verfeinerung in $P$. Da es jedoch keine mit $o$
  beschriftete Transition in $P$ gibt, kann $\mathcal{R}$ keine schwache
  as"=Verfeinerungs"=Relation zwischen $P$ und $Q$ sein.

  \begin{figure}[htbp]
    \begin{center}
      \begin{tikzpicture}[->, >=latex', auto,node distance=2.5cm, semithick]
        \node [initial,initial text=$P$:] (p0) at (0,0) {$p_0$};

        \path
        (p0) edge[loop right] node{$\tau$} (p0)
        ;

        \node [initial,initial text=$Q$:] (q0) at (6,0) {$q_0$};
        \node (q1) [right of=q0] {$q_1$};

        \path
        (q0) edge node{$o!$} (q1)
        (q0) edge[loop above] node{$\tau$} (q0)
        (q1) edge[loop right] node{$\tau$} (q1)
        ;
      \end{tikzpicture}
      \caption{Gegenbeispiel zu $\wasRel \Leftarrow \QRel$}
      \label{WasQuiGegenBsp}
    \end{center}
  \end{figure}

  $P \asRel Q \hspace{0.1cm}\not\hspace{-0.1cm}\Leftarrow P \QRel Q$:\\
  Falls diese Implikation gelten würde, würde jedes Paar von \MEIO{}s, dass in
  der Relation \QRel{} steht auch in der Relation \asRel{} stehen. Mit
  Lemma~\ref{ZusammenhWasAsLem} würde draus folgen, dass das \MEIO{} Paar auch
  in der Relation \wasRel{} stehen muss Dies stellt jedoch ein Widerspruch zum
  letzten Punkte dieses Beweises dar.

  $P \QRel Q \hspace{0.1cm}\not\hspace{-0.1cm}\Leftarrow P \ERel Q$:\\
  Die Relation \QRel{} stützt sich auf die Definition der Relation \ERel{}.
  Jedoch erweitert sich die Definition noch um eine weiter Voraussetzung. Es
  muss also in einem entsprechenden Gegenbeispiel die Inklusion $\QET _P
  \subseteq \QET _Q$ verletzt sein. Das Gegenbeispiel ist in
  Abbildung~\ref{QuiEGegenBsp} dargestellt. Es wird $I = \emptyset$
  vorausgesetzt, damit keine Input-kritischen Traces auftreten. Es gilt also
  $\ET _P = \ET _Q = \emptyset$ und $L(P) = L(Q) = \{\varepsilon\}$. Es gilt
  also $P\ERel Q$.\\
  Jedoch gilt für die strikten Stille-Traces $\StQT _P = \{\varepsilon\}$ und
  $\StQT _Q = \emptyset$. Es folgt also $\QET _P \not\subseteq \QET _Q$ und
  somit ist die Relation \QRel{} zwischen $P$ und $Q$ auch nicht erfüllt.

  \begin{figure}[htbp]
    \begin{center}
      \begin{tikzpicture}[->, >=latex', auto,node distance=2.5cm, semithick]
        \node [initial,initial text=$P$:] (p0) at (0,0) {$p_0$};

        \path
        (p0) edge[loop right] node{$\tau$} (p0)
        ;

        \node [initial,initial text=$Q$:, rectangle, draw, dotted] (q0) at
        (7,0) {$q_0 \in Qui _Q$};
      \end{tikzpicture}
      \caption{Gegenbeispiel zu $\QRel \Leftarrow \ERel$ mit $I_P = I_Q =
      \emptyset$}
      \label{QuiEGegenBsp}
    \end{center}
  \end{figure}
\end{proof}

\section{Hiding}

Der Hiding-Operator wandelt Outputs in $\tau$s um. Somit hat das Hiding auf die
Divergenz-Eigenschaft im Vergleich zu den betrachteten Eigenschaften aus den
beiden vorangegangen Kapiteln deutlich größere Auswirkungen. Die Menge der
divergenten Zustände kann sich durch das Internalisieren vergrößern. Es kann
ein Zustand divergent werden, wenn von diesem bereits lokal ein divergenter
Zustand aus erreichbar war oder wenn er eine unendliche Folge von Aktionen aus
$X\cup \{\tau\}$ ausführen konnte, jedoch nur endlich viele davon $\tau$s
waren. Durch die zusätzlichen Divergenz"=Zustände vergrößern sich alle
Trace-Mengen, die in der Präkongruenz \DRel{} betrachtet werden.\\
Um den Zusätzlichen Aufwand der Untersuchung möglichst gering zu halten, wird
dieses Teilkapitel auf endliche \MEIO{}s beschränkt. Falls man unendlich große
\MEIO{}s zulassen würde, müsste man an anderen Stellen
Endlichkeits"=Voraussetzungen machen.\\
Die Menge $X$ muss Teilmenge der Outputs $O$ sein, für einen endlichen \MEIO{}
kann $X$ ebenfalls nur endlich sein. Um eine endliche Menge von Aktionen zu
internalisieren, kann man jede Aktion einzeln aus dem entsprechend \MEIO{}
entfernen. Der folgende Satz kann also darauf beschränkt werden, dass nur ein
einzelnen Output verborgen werden soll. $P/o$ soll dabei für $P/\{o\}$ stehen.
Die Menge $\EDT _{P/o}$ kann aus $\EDT _P$ konstruiert werden. Im allgemeinen
ist die Menge $\EDT _{P/o}$ jedoch größer wie die Menge $\{w\in
(\Sigma\backslash \{o\})^*\mid \exists w'\in \EDT(P): w'|_{\Sigma\backslash
\{o\}} = w\}$


somit müssen die anderen Trace-Mengen mit der neuen Menge
geflutet werden.


\begin{Satz}[Divergenz-Präkongruenz bzgl.\ Internalisierung]
  \label{DivHidingSatz}
  Seien $P_1$ und $P_2$ zwei endliche \MEIO{}s für die $P_1\DRel P_2$ gilt,
  dann folgt auch die Gültigkeit von $P_1/X\DRel P_2/X$. Die Relation \DRel{}
  ist also ein Präkongruenz bezüglich $\cdot /\cdot$ für endliche \MEIO{}s. Es
  gilt für die Sprachen und Traces:
  \begin{enumerate}[(i)]
    \item $L(P/o) = \{w\in (\Sigma\backslash \{o\})^*\mid \exists w'\in L(P):
      w'|_{\Sigma\backslash \{o\}} = w\}$,
    \item $\EDT (P/o) = \cont (\prune (\{w\in (\Sigma\backslash \{o\})^*\mid
      \exists w':w'|_{\Sigma\backslash \{o\}} = w\land \forall n\geq 0:
      w'o^n\in\EDL (P)\}))$,
    \item $\EDL (P/o) = \{w\in (\Sigma\backslash \{o\})^*\mid \exists w'\in
      \EDL(P): w'|_{\Sigma\backslash \{o\}} = w\} \cup \EDT (P/o)$,
    \item $\QDT (P/o) = \{w\in (\Sigma\backslash \{o\})^*\mid \exists w'\in
      \QDT(P): w'|_{\Sigma\backslash \{o\}} = w\} \cup \EDT (P/o)$.
  \end{enumerate}
\end{Satz}
\begin{proof}
  Die Präkongruenz-Eigenschaft lässt sich wie bei den
  Sätzen~\ref{FehlerHidingSatz} und~\ref{StilleHidingSatz} aus den Aussagen
  über die Sprachen und Traces folgern. Somit sollen nun zunächst (i) bis (iv)
  nachgewiesen werden. Der Punkt (i) folgt aus (i) von
  Satz~\ref{FehlerHidingSatz} bzw.~\ref{StilleHidingSatz}.

  (ii) \glqq $\subseteq$\grqq{}:\\
  Beide Seiten sind abgeschlossen gegenüber \prune{} und \cont{}. Somit genügt
  es ein Element $w$ aus $\StET (P/o)\cup \StDT (P/o)$ zu betrachten. Es gibt
  also einen mit $w$ beschrifteten Ablauf in $P/o$, der zu einem Zustand $p$
  führt, der in $E_{P/o}\cup Div_{P/o}$ enthalten ist. Der selbe Zustand $p$
  kann analog zu den Sätzen~\ref{FehlerHidingSatz} und~\ref{StilleHidingSatz},
  durch das ersetzten von $\tau$s durch $o$s in dem mit $w$ beschrifteten
  Ablauf, in $P$ durch ein $w'$ erreicht werden mit
  $w'|_{\Sigma\backslash\{o\}} = w$.\\
  Falls von $p$ aus in $P$ ein Fehler- oder Divergenz"=Zustand lokal erreichbar
  ist, gilt $w'\in \EDT (P)\subseteq\EDL (P)$. Da die Menge \EDL{} unter
  \cont{} abgeschlossen ist, gilt dann auch $w'o^n\in\EDT (P)\subseteq\EDL (P)$
  für alle $n\in\mathbb{N}$.\\
  Der Zustand $p$ kann jedoch in $P$ auch ein Zustand sein, von dem aus weder
  ein Fehler noch Divergenz lokal erreicht werden kann. Es muss also durch das
  Internalisieren des Outputs $o$ in $P/o$ ein Divergenz"=Zustand entstanden
  sein. Da nur $o$s in $\tau$s umgewandelt wurden, muss $p$ in $P$ eine
  unendliche Folge an $o$s ausführen können, damit durch das Anwenden des
  Hiding"=Operators neue Divergenz entstehen kann. Es muss also alle $w'o^n$
  für $n\in\mathbb{N}$ in $P$ ausführbar sein. Somit gilt $\forall n\geq 0:
  w'o^n\in\EDL (P)$.

  (ii)  \glqq $\supseteq$\grqq{}:\\
  Für ein beliebiges $w'o^n\in \EDL (P)$ können zwei Fälle unterschieden
  werden.
  \begin{itemize}
    \item Fall 1 ($w'o^n\in\EDT (P)$): Es muss ein Präfix $v'$ von $w'$ geben,
      das in $\PrET (P)\cup \PrDT (P)$ enthalten ist. Für $v'\in\PrET (P)
      \subseteq\ET (P)$ muss mit Satz~\ref{FehlerHidingSatz} (ii)
      $v'|_{\Sigma\backslash\{o\}}$ in $\ET (P/o)$ enthalten sein. Mit einer
      analogen Argumentation wie in Satz~\ref{FehlerHidingSatz} (ii) kann auch
      für ein $v'$ aus $\PrDT (P)$ $v'|_{\Sigma\backslash\{o\}}\in\DT (P/o)$
      gefolgert werden. Da \EDT{} unter der Fortsetzungs-Funktion \cont{}
      abgeschlossen ist, gilt $w'|_{\Sigma\backslash\{o\}}\in\EDT (P/o)$.
    \item Fall 2 ($w'o^n\in L (P)$): Es muss $w'o^n\in L(P)$ für alle $n\in
      \mathbb{N}$ gelten, damit die Forderungen der linken Seite der Gleichung
      erfüllt sind. Da $P$ ein endlicher \MEIO{} ist, muss für $n =|P|$
      mindestens ein Zustand entlang des Ablaufes von $o^n$, der nach $w'$
      ausführbar ist, doppelt auftauchen. Der Zustand, der durch $w'$ in $P$
      erreicht ist, ist nach dem internalisieren von $o$ in $P/o$ divergent.
      Dieser Zustand wird in $P/o$ durch $w'|_{\Sigma\backslash\{o\}}$
      erreicht, da analog zu den Sätzen~\ref{FehlerHidingSatz}
      und~\ref{StilleHidingSatz} die im Ablauf enthaltenen $o$-Transitionen
      durch $\tau$-Transitionen ersetzt werden. Es gilt also
      $w'|_{\Sigma\backslash\{o\}}\in\EDT (P/o)$.
  \end{itemize}

  (iii) und (iv):\\
  Diese Punkte lassen sich analog zu den Aussagen aus
  Satz~\ref{FehlerHidingSatz} und~\ref{StilleHidingSatz} beweisen, da der Punkt
  (ii) dieses Satzes bereits nachgewiesen wurde.

  Da $P_1$ und $P_2$ endliche sein müssen, gibt es auch nur endliche viele
  Outputs, die man in ihnen verbergen kann. Die Menge $X$ muss also endlich
  sein. Für jedes Element $o$ aus $X$ kann mit den Punkten (ii) bis (iv) aus
  $P_1\DRel P_2$ gefolgert werden, dass auch $P_1/o\DRel P_2/o$ gilt. In dem
  man immer ein weiteren Output Internalisiert. Am Ende folgt auch $P_1/X\DRel
  P_2/X$ aus der Voraussetzungen $P_1\DRel P_2$ für endliche \MEIO{} $P_1$ und
  $P_2$.\\
  Somit bleibt die Relation \DRel{} unter Anwendung des Hiding-Operators
  erhalten und ist somit bezüglich diesem eine Präkongruenz.
\end{proof}

Die Parallelkomposition mit Internalisierung ist auf Basis der
Parallelkomposition $\cdot \|\cdot$ und des Hiding-Operators $\cdot /\cdot$
in~\ref{DefParallelkompInternal} definiert. Dies beiden Operatoren sind, wie in
Korollar~\ref{DivPraekonKor} und Satz~\ref{DivHidingSatz} nachgewiesen wurde,
Präkongruenzen bezüglich der Relation \DRel{}. Somit ist auch $\cdot |\cdot$
ein Präkongruenz bezüglich dieser Relation.

\begin{Kor}[Divergenz-Präkongruenz mit Internalisierung]
  Die Relation \DRel{} ist eine Präkongruenz bezüglich $\cdot |\cdot$.
\end{Kor}

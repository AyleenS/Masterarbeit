\chapter{Verfeinerungen für Kommunikationsfehler- und Ruhe-Freiheit}

In diesem Kapitel wird die Menge der betrachteten Zustandsmengen von den
Kommunikations"=basierten Fehlern im letzten Kapitel erweitert um
Ruhe-Zustände.\\
Zustände, die keine Outputs ohne einen Input ausführen können in Form einer
must"=Transition, werden als in einer Art Verklemmung angesehen, da sie ohne
Zutun von Außen den Zustand nicht mehr verlassen können, falls ein möglicherweise
vorhandener may"=Output nicht implementiert wird. So ein Zustand hat also keine
must"=Transitions"=Möglichkeiten für einen Output. Falls dieser Zustand die
Möglichkeit für eine interne Aktion via einer must"=Transition hat, darf durch
die $\tau$s niemals ein Zustand erreicht werden, von dem aus ein Output in
Implementierungen erzwungen wird. Ein Zustand, der keine Outputs und $\tau$s
via must"=Transitionen ausführen kann, ist also ein Deadlock-Zustand, in denen
das System nichts mehr tun können muss ohne einen Input. Wenn man eine
Erweiterung um $\tau$s zu Zuständen ohne must"=Outputs zulässt, hat man
zusätzlich noch Verklemmungen der Art Livelock, da diese Zustände
möglicherweise beliebig viele interne Aktionen ausführen können, jedoch nie aus
eigener Kraft einen wirklichen Fortschritt in Form eines Outputs bewirken
können müssen. Die Menge der Zustände, die sich in einer Verklemmung
befinden, würde also durch $\left\{p\in P\mid \forall a\in O: p\nweakmust[a]_P
\right\}$ beschrieben werden. Somit wären dies alle Zustände, die keine
Möglichkeit haben ohne einen Input von Außen oder eine implementierte
may"=Output"=Transition je wieder einen Output machen zu können. Falls man
diese Definition verwenden würde, müsste man immer alle Zustände betrachten,
die durch $\tau$s erreichbar sind. Dies würde einige Betrachtungen deutlich
aufwendiger machen und soll deshalb hier nicht behandelt werden. Die Definition
für die betrachteten Verklemmungen, hier Ruhe genannt, beschränkt sich auf
Zustände, die keine Outputs und $\tau$s ausführen können.

\begin{Def}[Ruhe]
  Ein \emph{Ruhe-Zustand} ist ein Zustand in einem \MEIO{} $P$, der keine
  Outputs und kein $\tau$ zulässt via must"=Transitionen.\\
  Somit ist die Menge der Ruhe-Zustände in einem \MEIO{} $P$ wie folgt formal
  definiert: $Qui(P):=\left\{p\in P\mid \forall\alpha\in (O\cup\{\tau\}):p
  \nmust[\alpha]_P\right\}$.
\end{Def}

\begin{Prop}[Ruhe und Implementierung]
  Für ein \MEIO{} $P$ gilt: $Qui(P) = \left\{p'\in P'\mid P'\in\asimp (P)\land
  \forall\alpha\in (O\cup\{\tau\}):p' \nmust[\alpha]_{P'}\right\}$.
\end{Prop}
\begin{proof}
  Da für alle $P'\in\asimp (P)$ $\must_{P'} =\may_{P'}$ gilt, dürfen alle $p'$
  keine ausgehenden Transitionen haben. Nach Definition~\ref{SimDef} dürfen zu
  $p'$ in Relation stehenden Zustände $p$ in $P$ keine ausgehenden
  must"=Transitionen für lokale Aktionen haben, da $p'$ diese sonst implementieren müsste. Somit
  sind alle $p'$, die die Forderung dieser Proposition erfüllen auch in $Qui
  (P)$ enthalten. Für alle $p$, die in $Qui (P)$ enthalten sind, gibt es keine
  ausgehenden must"=Transitionen für Outputs oder die interne Aktion $\tau$,
  somit können diese Aktionen entweder keine ausgehende Transition von $p$ sein
  oder nur als may"=Transition von $p$ zu einem möglicherweise anderen Zustand
  führen. Nicht vorhandenen Transitionen in $P$ sind auch in keiner
  as"=Implementierung von $P$ enthalten und es gibt mindestens eine
  Implementierung in $\asimp (P)$, die alle ausgehenden may"=Transitionen der
  lokalen Aktionen von $p$ nicht implementiert, somit sind alle $p$ aus $Qui
  (P)$ auch in $\left\{p'\in P'\mid P'\in\asimp (P)\land \forall\alpha\in
  (O\cup\{\tau\}):p' \nmust[\alpha]_{P'}\right\}$ enthalten.
\end{proof}

Für die Erreichbarkeit wird wie im letzten Kapitel ein optimistischer Anzahl
der lokalen Erreichbarkeit für die Fehler-Zustände, der Kommunikationsfehler,
verwendet. Ruhe ist kein unabwendbarer Fehler, sondern kann durch einen Input
repariert werden oder im Fall von vorhandenen may"=Output"=Transitionen oder
may"=$\tau$"=Transitionen, durch eine Implementierung dieses Outputs oder des
$\tau$s. Daraus ergibt sich, dass Ruhe im Vergleich
zu Kommunikationsfehler als weniger \glqq schlimmer Fehler\grqq{} anzusehen
ist. Somit ist ein Ruhe-Zustand ebenso wie ein Fehler-Zustand erreichbar,
sobald er durch Outputs und $\tau$s erreicht werden kann, jedoch ist nicht jede
beliebige Fortsetzung eines Traces, das durch lokale Aktionen zu einem
Ruhe-Zustand führt ein Ruhe"=Trace.

\begin{Def}[fehler- und ruhe-freie Kommunikation]
  Zwei \MEIO{}s $P_1$ und $P_2$ \emph{kommunizieren fehler- und ruhe-frei},
  wenn keine as"=Implementierung ihrer Parallelkomposition $P_{12}$ einen
  Fehler- oder Ruhe-Zustand lokal erreichen kann.
\end{Def}

\begin{Def}[Ruhe-Verfeinerungs-Basisrelation]
  \label{QBRelDef}
  Für \MEIO{}s $P_1$ und $P_2$ mit der gleichen Signatur wird $P_1\QBRel P_2$
  geschrieben, wenn ein Fehler- oder Ruhe-Zustand in einer as"=Implementierung
  von $P_1$ nur dann lokal erreichbar ist, wenn es auch eine
  as"=Implementierung von $P_2$ gibt, in der ein solcher lokal erreichbar ist.
  Diese \emph{Basisrelation} stellt eine \emph{Verfeinerung} bezüglich
  \emph{Kommunikationsfehlern} und \emph{Ruhe} dar.\\
  \QCRel{} bezeichnet die \emph{vollständig abstrakte Präkongruenz} von
  \QBRel{} bezüglich $\cdot\|\cdot$.
\end{Def}

Um eine genauere Auseinandersetzung mit den Präkongruenzen zu ermöglichen,
benötigt man wie im letzten Kapitel die Definition von Traces auf der Struktur.
Dadurch erhält man die Möglichkeit die gröbste Präkongruenz charakterisieren zu
können. Wie bereits oben erwähnt, ist Ruhe ein reparierbarer Fehler im
Gegensatz zu Kommunikationsfehlern. Es genügt deshalb für Ruhe die strikten
Traces ohne Kürzung zu betrachten.

\begin{Def}[Ruhe-Traces]
  \label{RuheTraceDef}
  Sei $P$ ein \MEIO{} und definiere:
  \begin{itemize}
    \item \emph{strikte Ruhe-Traces}: $\StQT (P) := \left\{w\in\Sigma ^*\mid
      p_0 \weakmay[w]_P p\in Qui(P)\right\}$.
  \end{itemize}
\end{Def}

\begin{Prop}[Ruhe-Traces und Implementierung]
  \label{QuiTraceProp}
  Für ein \MEIO{} $P$ gilt $\StQT (P) = \left\{w\in\Sigma ^*\mid \exists
  P'\in\asimp (P): p'_0 \weakmust[w]_{P'} p'\in Qui(P')\right\}$.
\end{Prop}
\begin{proof}
  Da $P'$ einen mit $w$ beschrifteten must"=Trace enthält und $P'$ eine
  as"=Implementierung von $P$ ist, muss $w$ als may"=Trace bereits in $P$
  möglich gewesen sein (Definition~\ref{SimDef}). Der Zustand $p'$ kann in $P'$
  auch nur ruhig sein, wenn der entsprechende in Relation stehende Zustand aus
  $P$ auch bereits ruhig war. Alle $w$ aus $\big\{w\in\Sigma ^*\mid \exists
  P'\in\asimp (P):$ $p'_0 \weakmust[w]_{P'} p'\in Qui(P')\big\}$ sind somit also
  auch in $\StQT (P)$ enthalten. Jeder may"=Trace aus $P$ kann implementiert
  werden durch eine as"=Implementierung. Die Menge $\asimp (P)$ enthält alle
  as"=Implementierungen von $P$, also auch eine, die den $w$ may"=Trace aus
  $\StQT (P)$ zu einem mit in $p$ Relation stehenden Zustand implementiert. $p$
  besitzt keine ausgehenden must"=Transitionen für lokale Aktionen, also gibt es
  unter den as"=Implementierungen, die $w$ entsprechend als must"=Trace
  enthalten auch mindestens eine, die keine ausgehende lokale Aktion an dem zu
  $p$ in Relation stehenden Zustand implementiert. Die Behauptung der hier zu
  beweisenden Proposition gilt.
\end{proof}

Für \ET{} und \EL{} gelten die Definitionen aus dem letzten Kapitel. Es wir nur
für Ruhe eine neue Semantik definiert.

\begin{Def}[Ruhe-Semantik]
  Sei $P$ ein \MEIO{}.
  \begin{itemize}
    \item Die Menge der \emph{fehler-gefluteten Ruhe-Traces} von $P$ ist $\QET
      (P):= \StQT (P)\cup\ET (P)$.
  \end{itemize}
  Für zwei \MEIO{}s $P_1,P_2$ mit der gleichen Signatur wird $P_1\QRel{} P_2$
  geschrieben, wenn $P_1\ERel{} P_2$ und $\QET _1\subseteq \QET _2$ gilt.
\end{Def}

\begin{Lem}[Ruhe-Zustände unter Parallelkomposition]\mbox{}
  \label{RuheZustLem}
  \begin{enumerate}
    \item Ein Zustand $(p_1,p_2)$ aus der Parallelkomposition $P_{12}$ ist
      ruhig, wenn es auch die Zustände $p_1$ und $p_2$ in $P_1$ bzw. $P_2$
      sind.
    \item Wenn der Zustand $(p_1,p_2)$ ruhig ist und nicht in $E_{12}$
      enthalten ist, dann sind auch die auf die Teilsysteme projizierten
      Zustände $p_1$ und $p_2$ ruhig.
  \end{enumerate}
\end{Lem}
\begin{proof}\mbox{}
  \begin{enumerate}
    \item Da $p_1\in Qui_1$ und $p_2\in Qui_2$ gilt, haben diese beiden
      Zustände jeweils höchstens die Möglichkeit für Input-Transitionen oder
      Output- und $\tau$-may"=Transitionen, jedoch keine Möglichkeit für Outputs
      oder $\tau$s als must"=Transitionen.\\
      Angenommen der Zustand, der durch die Parallelkomposition aus den
      Zuständen $p_1$ und $p_2$ entsteht, ist nicht ruhig, d.h.\ er hat eine
      ausgehende must"=Transition für einen Output oder ein $\tau$.
      \begin{itemize}
        \item Fall 1 \big($(p_1,p_2)\must[\tau]_{12}$\big): Ein $\tau$ ist eine
          interne Aktion und kann in der Parallelkomposition nicht durch das
          Verbergen von Aktionen bei der Synchronisation entstehen. Ein $\tau$
          in der Parallelkomposition ist also auch nur möglich, wenn dies
          bereits für einen der beiden Zustände als must"=Transition im der
          einzelnen Komponente möglich war für einen der Zustände, aus denen
          $(p_1,p_2)$ zusammensetzt ist. Jedoch verbietet die Voraussetzung,
          dass $p_1$ oder $p_2$ eine ausgehende $\tau$ must"=Transition haben,
          deshalb kann auch $(p_1,p_2)$ keine solche Transition besitzen.
        \item Fall 2 \big($(p_1,p_2)\must[a]_{12}$ mit $a\in O_{12}\backslash
          \Synch(P_1,P_2)$\big): Da es sich bei $a$ um einen Output handelt, der
          nicht in $\Synch (P_1,P_2)$ enthalten ist, kann dieser nicht aus der
          Synchronisation von zwei Aktionen entstanden sein, sondern muss
          bereits für $P_1$ oder $P_2$ als must"=Transition ausführbar gewesen
          sein. Es gilt also \oBdA{} $p_1\must[a]_1$ mit $a\in O_1$. Dies ist
          jedoch aufgrund der Voraussetzung nicht möglich. Somit kann die
          Parallelkomposition diese Transition für $(p_1,p_2)$ ebenfalls nicht
          als must"=Transition enthalten.
        \item Fall 3 \big($(p_1,p_2)\must[a]_{12}$ mit $a\in O_{12}\cap\Synch
          (P_1,P_2)$\big): Der Output $a$ ist in diesem Fall durch
          Synchronisation von einem Output mit einem Input entstanden. \OBdA{}
          gilt $a\in O_1\cap I_2$. Für die einzelnen Systeme muss also gelten,
          dass $p_1\must[a]_1$ und $p_2\must[a]_2$. Die Transition für das
          System $P_1$ ist jedoch in der Voraussetzung ausgeschlossen worden.
          Somit ist es nicht möglich, dass $P_{12}$ diese in diesem Fall
          angenommene must"=Transition für den Zustand $(p_1,p_2)$ ausführen
          kann.
      \end{itemize}
      Da alle diese Fälle zu einem Widerspruch mit der Voraussetzung führen
      folgt, dass bereits die Annahme, dass der Zustand $(p_1,p_2)$ nicht ruhig
      ist, falsch war. Es gilt also, dass aus $p_i\in Qui_i$ für $i\in\{1,2\}$
      $(p_1,p_2)\in Qui_{12}$ folgt.
    \item Es gilt $(p_1,p_2)\in Qui_{12}\backslash E_{12}$, somit hat dieser
      Zustand allenfalls die Möglichkeit für must"=Transitionen, die mit Inputs
      beschriftet sind.\\
      Angenommen $p_1\notin Qui _1$, dann ist für $p_1$ entweder eine
      $\tau$"=must"=Transition oder eine Output"=must"=Transition möglich.
      \begin{itemize}
        \item Fall 1 \big($p_1\must[\tau]_1$\big): Da die Transition für $P_1$
          möglich ist, hat auch $P_{12}$ die Möglichkeit für eine
          $\tau$"=must"=Transition. Dies ist jedoch durch die Voraussetzung
          verboten und somit kann dieser Fall nicht eintreten.
        \item Fall 2 \big($p_1\must[a]_1$ mit $a\in O_1\backslash
          \Synch(P_1,P_2)$\big): Da es sich bei $a$ um einen must"=Output
          handelt, der nicht zu synchronisieren ist, wird dieser einfach in die
          Parallelkomposition übernommen. Es müsste also $(p_1,p_2)
          \must[a]_{12}$ mit $a\in O_{12}$ gelten, was jedoch verboten ist.
          Somit kann die Transition für $P_1$ in diesem Fall nicht möglich
          sein.
        \item Fall 3 \big($p_1\must[a]_1$ mit $a\in O_1\cap\Synch(P_1,P_2)$ und
          $p_2\must[a]_2$\big): In diesem Fall ist die Synchronisation des
          Outputs $a$ von $P_1$ mit dem Input $a$ von $P_2$ möglich, so dass in
          der Parallelkomposition der Output $a$ als must"=Transition für
          $(p_1,p_2)$ entsteht. Diese must"=Transition ist jedoch für $P_{12}$
          nach Voraussetzung nicht erlaubt. Es folgt also auch, dass dieser
          Fall nicht eintreten kann.
        \item Fall 4 \big($p_1\must[a]_1$ mit $a\in O_1\cap\Synch(P_1,P_2)$ und
          $p_2\nmust[a]_2$\big): Da $P_2$ die $a$ Transition nicht als
          must"=Transition enthält, handelt es sich hier um einen neuen
          Kommunikationsfehler. Das $a$ kann für $P_2$ kein Output sein, da
          sonst $P_1$ und $P_2$ nicht komponierbar wäre. Der neue Kommunikationsfehler kann dadurch
          entstehen, dass die Synchronisation des Outputs $a$ von $P_1$ mit dem
          Input $a$ von $P_2$ an dieser Stelle nicht möglich ist, oder da der
          Input $a$ für $p_2$ nur als may"=Transition vorliegt und somit die
          Gefahr besteht, dass dieser in einer Implementierung nicht vorhanden
          ist. Im zweiten Fall synchronisieren die beiden Transitionen zu einer
          $a$ Output"=may"=Transition, die in $P_{12}$ zulässig wäre. Jedoch
          wird der Zustand $(p_1,p_2)$ in beiden Fällen in die Menge $E_{12}$
          der Parallelkomposition eingefügt (Definition~\ref{ParallelDef}).
          Dies wurde in der Voraussetzung für den Zustand ausgeschlossen und
          dieser Fall ist somit nicht möglich.
      \end{itemize}
      Alle aufgeführten Fälle führen zu einem Widerspruch mit der
      Voraussetzung, somit folgt, dass die Annahme bereits falsch war und
      $p_1\in Qui_1$ gelten muss. Analog kann für $p_2$ argumentiert werden, so
      dass dann auch $p_2\in Qui_2$ folgt.
  \end{enumerate}
\end{proof}

In dem folgenden Satz sind die Punkte 1.\ und 3.\ nur zur Vollständigkeit
aufgeführt. Sie entsprechen Punkt 1.\ und 2.\ aus Satz~\ref{KommFehlerSemSatz}.

\begin{Satz}[Kommunikationsfehler- und Ruhe-Semantik für Parallelkompositionen]
  \label{RuheSemSatz}
  Für zwei komponierbare \MEIO{}s $P_1,P_2$ und ihre Komposition $P_{12}$ gilt:
  \begin{enumerate}
    \item $\ET _{12}=\cont (\prune ((\ET _1\|\EL _2)\cup (\EL _1\|\ET _2)))$,
    \item $\QET _{12}=(\QET _1\|\QET _2)\cup\ET _{12}$,
    \item $\EL _{12}=(\EL _1\|\EL _2)\cup\ET _{12}$.
  \end{enumerate}
\end{Satz}
\begin{proof}
  Es wird nur der 2. Punkt beweisen.\\
  \glqq$\subseteq$\grqq{}:\\
  Hier muss unterschieden werden, ob ein $w\in\StQT _{12}\backslash\ET _{12}$
  oder ein $w\in\ET _{12}$ betrachtet wird. Im zweiten Fall ist das $w$
  offensichtlich in der rechten Seite enthalten. Somit wird ab jetzt ein
  $w\in\StQT _{12}\backslash\ET _{12}$ betrachtet und es wird versucht dessen
  Zugehörigkeit zur rechten Menge zu zeigen. Aufgrund von
  Definition~\ref{RuheTraceDef} weiß man, dass
  $(p_{01},p_{02})\weakmay[w]_{12}(p_1,p_2)$ gilt mit $(p_1,p_2)\in Qui_{12}
  \backslash E_{12}$. Durch Projektion erhält man $p_{01} \weakmay[w_1]_1
  p_1$ und $p_{02}\weakmay[w_2]_2p_2$ mit $w\in w_1\|w_2$. Aus $(p_1,p_2)\in
  Qui_{12}\backslash E_{12}$ kann mit dem zweiten Punkt von
  Lemma~\ref{RuheZustLem} gefolgert werden, dass bereits $q_1\in Qui_1$ und
  $q_2\in Qui_2$ gilt. Somit gilt $w_1\in\StQT _1\subseteq \QET _1$ und $w_2\in
  \StQT _2\subseteq\QET _2$. Daraus folgt dann $w\in \QET _1\|\QET _2$ und
  somit ist $w$ in der rechten Seite der Gleichung enthalten.

  \glqq$\supseteq$\grqq{}:\\
  Es muss wieder danach unterscheiden werden aus welcher Menge das betrachtete
  Element stammt. Falls $w\in\ET _{12}$ gilt, so kann die Zugehörigkeit zur
  linken Seite direkt gefolgert werden. Somit wird für den weiteren Beweis
  dieser Inklusionsrichtung ein Element $w\in\QET _1\|\QET _2$ betrachtet und
  gezeigt, dass es in der linken Menge enthalten ist. Da $\QET _i=\StQT _i\cup
  \ET _i$ gilt, existieren für $w_1$ und $w_2$ mit $w\in w_1\|w_2$
  unterschiedliche Möglichkeiten:
  \begin{itemize}
    \item Fall 1 ($w_1\in\ET _1\lor w_2\in\ET _2$): \OBdA{} gilt $w_1\in\ET
      _1$. Nun kann $w_2\in\StQT _2\subseteq L_2$ oder $w_2\in\ET _2$ gelten
      und somit ist auf jeden Fall $w_2$ in $\EL _2$ enthalten. Daraus kann
      dann mit dem ersten Punkt von Satz~\ref{KommFehlerSemSatz} gefolgert
      werden, dass $w\in\ET _{12}$ gilt und damit ist $w$ in der linken Seite
      der Gleichung enthalten.
    \item Fall 2 ($w_1\in\StQT _1\backslash\ET _1\land w_2\in\StQT _2\backslash
      \ET _2$): Es gilt in diesem Fall $p_{01} \weakmay[w_1]_1 p_1\in Qui_1$
      und $p_{02} \weakmay[w_2]_2 p_2\in Qui_2$. Da $p_1$ und $p_2$ in der
      jeweiligen Ruhe-Menge enthalten sind, ist auch der Zustand, der aus ihnen
      zusammengesetzt ist, in der Parallelkomposition ruhig, wie bereits im
      ersten Punkt von Lemma~\ref{RuheZustLem} gezeigt. Es gilt also für die
      Komposition $(p_{01},p_{02}) \weakmay[w]_{12} (p_1,p_2)\in Qui_{12}$ und
      dadurch ist $w$ in der linken Seite der Gleichung enthalten, da $w\in
      \StQT _{12}\subseteq \QET _{12}$ gilt.
  \end{itemize}
\end{proof}

\begin{Kor}[Ruhe-Präkongruenz]
  \label{RuhePraekonKor}
  Die Relation \QRel{} ist eine Präkongruenz bezüglich $\cdot\|\cdot$.
\end{Kor}
\begin{proof}
  Es muss gezeigt werden: Wenn $P_1\QRel P_2$ gilt, so auch $P_{31}\QRel
  P_{32}$ für jedes komponierbare System $P_3$. D.h.\ es ist zu zeigen, dass
  aus $P_1\ERel P_2$ und $\QET{}_1\subseteq \QET{}_2$ sowohl $P_{31}\ERel
  P_{32}$ als auch $\QET{}_{31}\subseteq \QET{}_{32}$ folgt. Dies ergibt sich,
  wie im Beweis zu Korollar~\ref{KommPraekonKor}, aus der Monotonie von
  $\cdot\|\cdot$ auf Sprachen wie folgt:
  \begin{itemize}
    \item $\begin{aligned}[t]
        P_{31} \overset{\mathrm{Korollar}~\ref{KommPraekonKor}}{
          \overset{\mathrm{und}}{\overset{P_1\ERel P_2}{\ERel}}}
        P_{32},
    \end{aligned}$
    \item $\begin{aligned}[t]
        \QET{}_{31} &\overset{\ref{RuheSemSatz}~2.}{=}
        (\QET{}_3\|\QET{}_1)\cup \ET{}_{31}\\
        &\hspace{-0.6cm}\overset{\ET{}_{31}\subseteq
      \ET{}_{32}}{\overset{\mathrm{und}}{\overset{\QET{}_1\subseteq
      \QET{}_2}{\subseteq}}} (\QET{}_3\|\QET{}_2) \cup \ET{}_{32}\\
        &\overset{\ref{RuheSemSatz}~2.}{=} \QET{}_{32}.
    \end{aligned}$
  \vspace*{-0.7cm}
  \end{itemize}
\end{proof}

Im nächsten Lemma soll eine Verfeinerung bezüglich guter Kommunikation mit
Partnern im Sinne von fehler- und ruhe-freier Kommunikation betrachtet werden.

\begin{Lem}[Verfeinerung mit Ruhe-Zuständen]
  \label{RuheVerfeinLem}
  Gegeben sind zwei \MEIO{}s $P_1$ und $P_2$ mit der gleichen Signatur. Wenn
  $U\|P_1\QBRel U\|P_2$ für alle Partner $U$ gilt, dann folgt daraus $P_1\QRel
  P_2$.
\end{Lem}
\begin{proof}
  Da $P_1$ und $P_2$ die gleiche Signatur haben, wird $I:=I_1=I_2$ und
  $O:=O_1=O_2$ definiert. Für jeden Partner $U$ gilt $I_U=O$ und $O_U=I$.\\
  Um zu zeigen, dass die Relation $P_1\QRel P_2$ gilt, müssen die folgenden
  Punkte nachgewiesen werden:
  \begin{itemize}
    \item $P_1\ERel P_2$,
    \item $\QET _1\subseteq \QET _2$.
  \end{itemize}
  In Lemma~\ref{KommVerfeinLem} wurde bereits etwas Ähnliches gezeigt, jedoch
  wurde dort als Voraussetzung $U\|P_1\EBRel U\|P_2$ für alle Partner $U$
  verwendet und hier dieselbe Aussage mit der Basisrelation der Ruhe. Dadurch
  dass die hier verwendetet Basisrelation nichts über die Art des erreichbaren
  Fehlers in der Komponente aussagt, kann der Beweis aus
  Lemma~\ref{KommVerfeinLem} nicht verwendet werden. Es kann also aus der
  lokalen Erreichbarkeit eines Fehler-Zustands der Art Kommunikationsfehler in
  $P'_1$ und dem relationalen Zusammenhang von $P'_1\QBRel P'_2$ nur
  geschlossen werden, dass in $P'_2$ auch ein Fehler lokal erreichbar ist,
  jedoch kann dieser Fehler ein Kommunikationsfehler oder Ruhe sein. Analog
  verhält es sich, wenn in $P'_1$ ein Ruhe-Zustand lokal erreichbar ist.
  \TODO{Fehlererreichbarkeit Aufgrund von \QBRel{} genauer erläutern}\\
  Es muss also für den ersten Punkt noch folgendes nachgewiesen werden:
  \begin{itemize}
    \item $\ET _1\subseteq\ET _2$,
    \item $\EL _1\subseteq\EL _2$.
  \end{itemize}
  Es wird nun damit begonnen, den ersten Unterpunkt des ersten Beweispunktes zu
  zeigen, d.h.\ es wird unter der Voraussetzung $U\|P_1\QBRel U\|P_2$ gezeigt,
  dass $\ET _1\subseteq\ET _2$ gilt. Da beide \ET{}-Mengen unter \cont{}
  abgeschlossen sind, reicht es ein präfix-minimales Element $w\in\ET _1$ zu
  betrachten und zu zeigen, dass dieses $w$ oder eines seiner Präfixe in $\ET
  _2$ enthalten ist.
  \begin{itemize}
    \item Fall 1 ($w=\varepsilon$): Es handelt sich um einen lokal erreichbaren
      Fehler-Zustand in $P_1$. Für $U$ wird ein Transitionssystem verwendet,
      das nur aus dem Startzustand, einer must-Schleife für alle Inputs $x\in I_U$
      und einer must-Schlinge für $\tau$ besteht. Somit kann $P_1$ die im Prinzip
      gleichen Fehler-Zustände der Art Kommunikationsfehler lokal erreichen wie
      $U\|P_1$. Es gibt also einen lokal erreichbaren Zustand von $U\|P_1$, der
      in $E_{U\|P_1}$ enthalten ist. Mindestens eine as"=Implementierung von
      $U\|P_1$ wird diesen Kommunikationsfehler implementieren und somit muss
      es auch mindestens eine as"=Implementierung von $U\|P_2$ geben, die
      ebenfalls einen lokal erreichbaren Fehler hat. Dieser Fehler kann jedoch
      sowohl an der fehlenden Möglichkeit für lokale Aktionen in einem Zustand
      liegen, wie an einem Zustand, der in $E _{U\|P_2}$ enthalten ist. Falls
      es sich in der as"=Implementierung um lokal erreichbare Ruhe handelt,
      dürfen in dem in Relation stehenden Zustand in $U\|P_2$ die lokalen
      Aktionen keine must"=Transitionen gewesen sein, da dies sonst einen
      Widerspruch zu Definition~\ref{SimDef} 1.\ darstellen würde. Ein lokal
      erreichbarer Kommunikationsfehler in der as"=Implementierung würde
      hingegen durch Definition~\ref{SimDef} ebenfalls zu einem lokal
      erreichbaren Kommunikationsfehler in $U\|P_2$ führen. Es muss also in
      allen Fällen ein Fehler in $U\|P_2$ lokal erreichbar sein. Hierbei kann
      es sich jedoch nur um einen lokal erreichbaren Kommunikationsfehler
      handeln, da es in der Komposition mit $U$ keine Ruhe-Zustände geben kann.
      Da $U$ keinen Fehler-Zustand und auch keine fehlenden Input-Möglichkeiten
      enthält, kann der Kommunikationsfehler nur von $P_2$ geerbt sein. Somit
      muss in $S_2$ ein Fehler-Zustand lokal erreichbar sein, d.h.\ es gilt
      $\varepsilon\in\PrET _2\subseteq \ET _2$.
    \item Fall 2 ($w=x_1\dots x_n x_{n+1}\in\Sigma ^+$ mit $n\geq 0$ und
      $x_{n+1}\in I$): Es wird der folgende Partner $U$ betrachtet (siehe auch
      Abbildung~\ref{UohneEmitTau}):
      \begin{itemize}
        \item $U=\{p_0,p_1,\dots ,p_{n+1}\}$,
        \item $p_{0U}=p_0$,
        \item $\begin{aligned}[t]
            \must _U=&\{(p_i,x_{i+1},p_{i+1})\mid  0\leq i\leq n\}\\
            &\cup\{(p_i,x,p_{n+1})\mid  x\in I_U\backslash\{x_{i+1}\}, 0\leq
            i\leq n\}\\
            &\cup\{(p_{n+1},x,p_{n+1})\mid  x\in I_U\}\\
            &\cup\{(p_i,\tau,p_i)\mid 0\leq i\leq n+1\},
        \end{aligned}$
        \item $E_U=\emptyset$.
      \end{itemize}
      \begin{figure} [h!tbp]
      \begin{center}
        \begin{tikzpicture}[->, >=latex',auto,node distance =3cm, semithick]
          \node (0) {$p_0$};
          \node (1) [right of=0] {$p_1$};
          \node (dots) [right of=1] {$\dots$};
          \node (n) [right of=dots] {$p_n$};
          \node (n1) at ($(1)!0.5!(dots) + (0,-3)$) {$p_{n+1}$};

          \path ($ (0) + (-1,0) $) edge (0)
                (0) edge node {$x_1$} (1)
                    edge [bend right] node [below, sloped] {$x?\neq x_1$} (n1)
                    edge [loop above] node {$\tau$} (0)
                (1) edge node {$x_2$} (dots)
                    edge node [below, sloped] {$x?\neq x_2$} (n1)
                    edge [loop above] node {$\tau$} (1)
                (dots) edge node {$x_n$} (n)
                       edge [dashed] (n1)
                (n) edge node [above, sloped] {$x?\in I_U$} (n1)
                    edge [bend left] node [sloped] {$x_{n+1}$!} (n1)
                    edge [loop above] node {$\tau$} (n)
                (n1) edge [loop below] node {$x?\in I_U, \tau$} (n1);
        \end{tikzpicture}
        \caption{$x?\neq x_i$ steht für alle $x\in I_U\backslash\{x_i\}$}
      \label{UohneEmitTau}
      \end{center}
      \end{figure}
      Die Menge der Ruhe-Zustände der hier betrachteten $U$s ist leer. Da im
      Vergleich zum Transitionssystem in Abbildung~\ref{UohneE} nur die
      $\tau$-Schlingen ergänzt wurden, ändert sich nichts an den Fällen 2a) und
      2b). Die Begründungen, wieso in den beiden Fällen $\varepsilon\in\PrET
      (P')$ für ein $P'$ aus $\asimp (U\|P_1)$ gilt, bleibt also analog zum
      Beweis des ersten Punktes von Lemma~\ref{KommVerfeinLem}. Durch die
      must-$\tau$-Schlingen wurde, genau wie im letzten Fall nur erreicht, das
      in einer Parallelkomposition mit $U$ keine Ruhe-Zustände möglich sind. Es
      kann also auch hier aus der lokalen Erreichbarkeit eines
      Kommunikationsfehler in einer as"=Implementierung von $U\|P_1$ auf die
      lokale Erreichbarkeit eines Fehler-Zustandes der Art Kommunikationsfehler
      in einer as"=Implementierung von $U\|P_2$ und somit auch in $U\|P_2$
      geschlossen werden. Die weitere Argumentation verläuft dann analog zu
      Fall 2, derselben Inklusion im Beweis zu Lemma~\ref{KommVerfeinLem}. Da
      $\tau$s nur interne Aktionen einer einzelnen Komponente sind, verändert
      sich auch nichts an den Traces über die argumentiert wird. Es können zwar
      möglicherweise $\tau$-Transitionen ausgeführt werden, diese können jedoch
      weder zu einem Fehler führen noch beeinflussen, dass ein anderer Trace
      nicht ausgeführt werden kann.
  \end{itemize}

  Nun wird mit dem zweiten Unterpunkt des ersten Beweispunktes begonnen. Genau
  wie im Beweis zu~\ref{KommVerfeinLem} ist hier jedoch aufgrund des bereits
  geführten Beweisteils nur noch $L_1\backslash\ET _1\subseteq\EL _2$ zu
  zeigen. Es wird also für ein beliebig gewähltes $w\in L_1\backslash\ET _1$
  gezeigt, dass dieses auch in $\EL _2$ enthalten ist.
  \begin{itemize}
    \item Fall 1 ($w=\varepsilon$): Ebenso wie in~\ref{KommVerfeinLem} gilt
      auch hier, dass $\varepsilon$ immer in $\EL _2$ enthalten ist.
    \item Fall 2 ($w=x_1\dots x_n$ mit $n\geq 1$): Die Konstruktion des
      Partners $U$ weicht wie im letzten Beweisteil nur durch die
      $\tau$-must-Schleifen an den Zuständen des Transitionssystems vom Beweis des
      zweiten Punktes aus Lemma~\ref{KommVerfeinLem} ab. Somit ist der Partner
      $U$ dann wie folgt definiert (siehe dazu auch Abbildung~\ref{UmitEundTau}):
      \begin{itemize}
        \item $U=\{p_0,p_1,\dots ,p_n,p\}$,
        \item $p_{0U}=p_0$,
        \item $\begin{aligned}[t]
            \must _U=&\{(p_i,x_{i+1},p_{i+1})\mid 0\leq i< n\}\\
            &\cup\{(p_i,x,p)\mid x\in I_U\backslash\{x_{i+1}\},0\leq i < n\}\\
            &\cup\{(p_i,\tau ,p_i)\mid 0\leq i\leq n\}\\
            &\cup\{(p,\alpha ,p)\mid \alpha\in I_U\cup \{\tau\}\},
              \end{aligned}$
        \item $E_U=\{p_n\}$.
      \end{itemize}
      \begin{figure} [h!tbp]
      \begin{center}
        \begin{tikzpicture}[->, >=latex',auto,node distance =3cm, semithick]

          \node (0) {$p_0$};
          \node (1) [right of=0] {$p_1$};
          \node (dots) [right of=1] {$\dots$};
          \node (n1) [right of=dots] {$p_{n-1}$};
          \node (n) [right of=n1, rectangle, draw] {$p_n\in E_U$};
          \node (q) at ($(1)!0.5!(dots) + (0,-3)$) {$p$};

          \path ($ (0) + (-1,0) $) edge (0)
                (0) edge node {$x_1$} (1)
                    edge [bend right] node [below, sloped] {$x?\neq x_1$} (q)
                    edge [loop above] node {$\tau$} (0)
                (1) edge node {$x_2$} (dots)
                    edge node [below, sloped] {$x?\neq x_2$} (q)
                    edge [loop above] node {$\tau$} (1)
                (dots) edge node {$x_{n-1}$} (n1)
                       edge [dashed] (q)
                (n1) edge node {$x_n$} (n)
                     edge [bend left] node [below, sloped] {$x?\neq x_n$} (q)
                     edge [loop above] node {$\tau$} (n1)
                (q) edge [loop below] node {$x?\in I_U, \tau$} (q)
                (n) edge [loop above] node {$\tau$} (n);
        \end{tikzpicture}
        \caption{$x?\neq x_i$ steht für alle $x\in I_U\backslash\{x_i\}$, $p_n$
          ist der einzige Error-Zustand}
      \label{UmitEundTau}
      \end{center}
      \end{figure}
      Da durch die $\tau$-must-Schlingen an den Zuständen wie oben vermieden wird,
      dass es in einer Komposition mit $U$ und auch in $U$ selbst Ruhe-Zustände
      gibt, verläuft der Rest des Beweises dieses Punktes analog zum Beweis der
      selben Inklusionsrichtung von Lemma~\ref{KommVerfeinLem}. Und somit gilt
      für alle Fälle (2a) bis 2d)), dass $w$ in $\EL _2$ enthalten ist.
  \end{itemize}

  So bleibt nur noch der letzt Beweispunkt zu zeigen, d.h.\ die Inklusion $\QET
  _1\subseteq\QET _2$. Die Inklusion kann jedoch, analog zum Beweis der
  Inklusion der Kommunikationsfehler-gefluteten Sprache, noch weiter
  eingeschränkt werden. Da bereits bekannt ist, dass $\ET _1\subseteq\ET _2$
  gilt, muss nur noch $\StQT _1\backslash\ET _1\subseteq\QET _2$ gezeigt
  werden.\\
  Es wird ein $w\in\StQT _1\backslash\ET _1$ gewählt und gezeigt, dass dieses
  auch in $\QET _2$ enthalten ist.\\
  Durch die Wahl des $w$s wird vom Startzustand von $P_1$ durch das Wort $w$
  ein ruhiger Zustand erreichbar. Dies hat nur Auswirkungen auf die
  Parallelkomposition $U\|P_1$, wenn in $U$ ebenfalls ein Ruhe-Zustand durch
  $w$ erreichbar ist.\\
  Das betrachtete $w$ hat also die Form $w=x_1\dots x_n\in\Sigma ^*$ mit $n\geq
  0$. Es wird der folgende Partner $U$ betrachtet (siehe auch
  Abbildung~\ref{UohneEmitI}):
  \begin{itemize}
    \item $U=\{p_0,p_1,\dots ,p_n, p\}$,
    \item $p_{0U}=p_0$,
    \item $\begin{aligned}[t]
        \must _U=&\{(p_i,x_{i+1},p_{i+1})\mid  0\leq i< n\}\\
        &\cup\{(p_i,x,p)\mid  x\in I_U\backslash\{x_{i+1}\}, 0\leq i< n\}\\
        &\cup\{(p_i,\tau,p_i)\mid 0\leq i< n\}\\
        &\cup\{(p_n,x,p)\mid x\in I_U\}\\
        &\cup\{(p,\alpha,p)\mid \alpha\in I_U\cup\{\tau\}\},
    \end{aligned}$
    \item $E_U=\emptyset$.
  \end{itemize}
  \begin{figure} [h!tbp]
  \begin{center}
    \begin{tikzpicture}[->, >=latex',auto,node distance =3cm, semithick]
      \node (0) {$p_0$};
      \node (1) [right of=0] {$p_1$};
      \node (dots) [right of=1] {$\dots$};
      \node (n) [right of=dots, rectangle, dotted, draw] {$p_n\in Qui_U$};
      \node (q) at ($(1)!0.5!(dots) + (0,-3)$) {$p$};

      \path ($ (0) + (-1,0) $) edge (0)
            (0) edge node {$x_1$} (1)
                edge [loop above] node {$\tau$} (0)
                edge [bend right] node [below, sloped] {$x?\neq x_1$} (q)
            (1) edge node {$x_2$} (dots)
                edge [loop above] node {$\tau$} (1)
                edge [below, sloped] node {$x?\neq x_2$} (q)
            (dots) edge node {$x_n$} (n)
                   edge [dashed] (q)
            (n) edge [bend left] node [below,sloped] {$x?\in I_U$} (q)
            (q) edge [loop below] node {$x?\in I_U, \tau$} (q);
    \end{tikzpicture}
    \caption{$x?\neq x_i$ steht für alle $x\in I_U\backslash\{x_i\}$, $p_n$
    ist der einzige Ruhe-Zustand}
  \label{UohneEmitI}
  \end{center}
  \end{figure}
  Falls für das betrachtete $w=\varepsilon$ gilt, reduziert sich der Partner
  $U$ auf den Zustand $p_n=p_0$ und den Zustand $p$. Es ist also in diesem Fall
  der Startzustand gleich dem ruhigen Zustand.\\
  Allgemein ist der Zustand $p_n$ aus $U$ der einzig ruhige Zustand in $U$. Es
  gilt wegen des ersten Punktes von Lemma~\ref{RuheZustLem}, dass auch in der
  Parallelkomposition $U\|P_1$ ein Ruhe-Zustand mit $w$ erreicht wird. Da es
  sich bei allen in $w$ befindlichen Aktionen um synchronisierte Aktionen
  handelt und $I_U\cap I=\emptyset$, folgt $w\in O_{U\|P_1}$ und $w\in\StQT
  (U\|P_1)$. Es kann also in der Parallelkomposition durch $w$ ein Ruhe-Zustand
  lokal erreicht werden. Da $w\notin\ET _1$ gilt, kann auf dem Weg, der mit $w$
  im Transitionssystem $P_1$ zurückgelegt wird, kein Kommunikationsfehler
  lokal erreicht werden. Es kann also weder von $P_1$ noch von $U$ ein
  Kommunikationsfehler auf diesem Weg geerbt werden und durch den Aufbau von
  $U$ kann auch kein neuer Kommunikationsfehler in der Parallelkomposition
  beider Systeme entstehen. Da ein Ruhe-Zustand in $U\|P_1$ lokal erreichbar
  ist, muss dies auch in einer as"=Implementierung von $U\|P_1$ der Fall sein.
  Daraus folgt mit der Relation \QBRel{}, dass es auch ein Element aus $\asimp
  (U\|P_2)$ geben muss bei dem ein Fehler lokal erreichbar ist. Mit der
  Begründung aus der ersten Inklusion in diesem Beweis muss also der
  entsprechende Fehler aus der as"=Implementierung auf einen in $U\|P_2$
  zurückführbar sein und somit auch dort lokal erreichbar sein. Jedoch kann
  zunächst keine Aussage getroffen werden, ob das $w$ in $U\|P_2$ ausführbar
  ist und ob es sich bei dem Fehler um Ruhe oder einen Kommunikationsfehler
  handelt.
  \begin{itemize}
    \item Fall a) ($\varepsilon\in\ET (U\|P_2)$): Es handelt sich bei dem lokal
      erreichbaren Fehler um einen Kommunikationsfehler. Es ist somit nicht
      relevant, ob $w$ ausführbar ist. Der Fehler-Zustand kann sowohl von $P_2$
      geerbt sein, wie auch durch fehlende Input"=must"=Transitionen als neuer
      Kommunikationsfehler in der Parallelkomposition entstanden sein. Es gilt
      also, dass bereits in $P_2$ ein Präfix von $w$ in $\ET _2$ enthalten ist,
      wegen des Beweises des ersten Punktes aus Lemma~\ref{KommVerfeinLem} und
      das $U$ nur neue Kommunikationsfehler auf dem Trace $w$ zulässt. Da die
      Menge \ET{} unter \cont{} abgeschlossen ist, gilt also auch $w\in\ET
      _2\subseteq\QET _2$.
    \item Fall b) (Ruhe-Zustand lokal erreichbar in $U\|P_2$ und
      $\varepsilon\notin\ET (U\|P_2)$): Da in $U$ nur durch $w$ ein ruhiger
      Zustand erreicht werden kann, muss es sich bei dem lokal erreichbaren
      Ruhe-Zustand in $U\|P_2$ um einen handeln, der mit $w$ erreicht werden
      kann. Mit Lemma~\ref{RuheZustLem} kann somit gefolgert werden, dass auch
      in $P_2$ ein Ruhe-Zustand mit $w$ erreichbar sein muss. Es gilt also
      $w\in\StQT _2\subseteq\QET _2$.
  \end{itemize}
\end{proof}

Mit dem folgenden Satz wird festgehalten, dass mit \QRel{} die gröbste
Präkongruenz bezüglich $\cdot\|\cdot$ charakterisiert wurde, die in \QBRel{}
enthalten ist

\begin{Satz}[Vollständige Abstraktheit für Ruhe-Semantik]
  \label{RuheVollAbstraktSatz}
  Seien $P_1$ und $P_2$ zwei \MEIO{}s mit der selben Signatur. Dann gilt
  $P_1\QCRel P_2\Leftrightarrow P_1\QRel P_2$.
\end{Satz}
\begin{proof}\mbox{}\\
  \glqq$\Leftarrow$\grqq{}: Nach Definition gilt $w\in\QET (P)$ mit $w\in
  O(P)^*$ genau dann, wenn in $P$ ein Ruhe-Zustand oder ein Fehler-Zustand der
  Art Kommunikationsfehler lokal erreichbar ist. $P_1\QRel P_2$ impliziert,
  dass $w\in\QET _2$ gilt, wenn $w\in\QET _1$ gilt. Somit ist ein Ruhe-Zustand
  oder ein Fehler-Zustand nur dann in $P_1$ lokal erreichbar, wenn auch ein
  solcher in $P_2$ lokal erreichbar ist. Daraus folgt, dass es
  as"=Implementierungen von $P_1$ und $P_2$ gibt, die die analogen Fehler lokal
  erreichen. Somit gilt $P_1\QBRel P_2$. Es ist also \QRel{} in \QBRel{}
  enthalten. Im Korollar~\ref{RuhePraekonKor} wurde festgestellt, dass \QRel{}
  eine Präkongruenz ist. Da jedoch \QCRel{} nach Definition~\ref{QBRelDef} die
  gröbste Präkongruenz bezüglich $\cdot\|\cdot$ ist, die in \QBRel{} enthalten
  ist, muss \QRel{} in \QCRel{} enthalten sein. Es folgt also aus $P_1\QRel
  P_2$, dass auch $P_1\QCRel P_2$ gilt.

  \glqq$\Rightarrow$\grqq{}: Durch die Definition von \QCRel{} als Präkongruenz
  in~\ref{QBRelDef} folgt aus $P_1\QCRel P_2$, dass $U\|P_1\QCRel U\|P_2$ für
  alle \MEIO{}s $U$ gilt, die mit $P_1$ komponierbar sind. Da \QCRel{} nach
  Definition in \QBRel{} enthalten ist, folgt auch die Gültigkeit von
  $U\|P_1\QBRel U\|P_2$ für alle diese \MEIO{}s $U$. Mit
  Lemma~\ref{RuheVerfeinLem} folgt dann $P_1\QRel P_2$.
\end{proof}

Es wurde somit, wie im letzten Kapitel, eine Kette an Folgerungen gezeigt, die
sich zu einem Ring schließen. Dies ist in Abbildung~\ref{FolgerungsketteQui}
dargestellt.

\begin{figure}[h!tbp]
  \begin{center}
    \begin{tikzpicture}
      \matrix (m) [matrix of math nodes,row sep=2cm,column sep=4cm]{%
        P_1\QRel P_2 & P_1\QCRel P_2 \\
        \substack{\forall~\mathrm{Partner}~P:\\U\|P_1\QBRel U\|P_2} &
      \substack{\forall~\mathrm{komponierbaren}~U:\\U\|P_1\QBRel U\|P_2} \\};
        \draw[-implies, double, double distance=1mm]
          (m-1-1) -- node [above] {\glqq{}$\Leftarrow$\grqq{} von
            Satz~\ref{RuheVollAbstraktSatz}} (m-1-2);
        \draw[-implies, double, double distance=1mm]
          (m-1-2) -- node [right] {Definition von \QCRel{}
          in~\ref{QBRelDef}} (m-2-2);
        \draw[-implies, double, double distance=1mm]
          (m-2-1) -- node [left]
          {Lemma~\ref{RuheVerfeinLem}} (m-1-1);
        \draw[-implies, double, double distance=1mm]
        (m-2-2) -- node [below]
        {$\substack{U~\mathrm{Partner}\\\Downarrow\\U~\mathrm{komponierbar}}$} (m-2-1);
    \end{tikzpicture}
    \caption{Folgerungskette}
  \label{FolgerungsketteQui}
  \end{center}
\end{figure}

Angenommen man definiert, dass $P_1$ $P_2$ verfeinern soll genau dann, wenn für
alle Partner \MEIO{}s $U$ für die $P_2$ fehler- und ruhe-frei mit $U$
kommuniziert, folgt, dass $P_2$ ebenfalls fehler- und ruhe-frei mit $U$
kommuniziert. Dann wird auch diese Verfeinerung durch \QRel{}
charakterisiert.\\
Aus Satz~\ref{RuheVollAbstraktSatz} und Lemma~\ref{RuheVerfeinLem} erhält man
das folgende Korollar.

\begin{Kor}
  Es gilt: $P_1\QRel P_2\Leftrightarrow U\|P_1\QBRel U\|P_2$ für alle Partner
  $U$.
\end{Kor}

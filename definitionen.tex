\chapter{Definitionen}

\begin{Def}[Modal Interface Automat]
  Ein \emph{Modal Interface Automat (\MIA{})} ist ein Tupel
  $(P,I,O,\must,\may,p_0,e)$ mit:
  \begin{itemize}
    \item $P$: Menge der Zustände
    \item $p_0\in P$: Startzustand
    \item $e\in P$: universeller Zustand
    \item $I,O$: disjunkte Input- und Outputaktionen
    \item $A = I\cup O$: Alphabet
    \item $\tau\notin A$: interne Aktion
    \item $\must{} \subseteq P\times (A\cup\{\tau\})\times
      (\mathcal{P}(P)\backslash\emptyset )$\footnote{$\mathcal{P}(P)$
      bezeichnet die Potenzmenge von $P$}: disjunktive
      must-Transitions-Relation
    \item $\may{} \subseteq P\times (A\cup\{\tau\})\times
      P$: may-Transitions-Relation
  \end{itemize}
  Es werden die folgenden Eigenschaften vorausgesetzt:
  \begin{enumerate}
    \item $\forall\alpha\in A\cup\{\tau\}:p\must[\alpha]P
      \Rightarrow\forall p'\in P:p\may[\alpha]p'$
      (syntaktische Konsistenz)
    \item $e$ tritt nur als Zielzustand von Input may-Transitionen auf
      (Senken-Voraussetzung) \TODO{Übersetzung überdenken}
  \end{enumerate}
\end{Def}

Must-Transitionen sind Transitionen, die von einer Verfeinerung implementiert
werden müssen. Die may-Transitionen sind hingegen die zulässigen Transitionen
für eine Verfeinerung.\\
Für beliebige Alphabete $I,O$ ist dann $P=(\{e\},I,O,\emptyset ,\emptyset,
e,e)$ der universelle MIA, da in $e$ als universellen Zustand beliebiges
Verhalten zulässig ist.\\
\TODO{allgemeine Benennungen erklären ($\alpha,a$)}

\begin{Def}[Parallelprodukt]
  Zwei \MIA{}s $P_1,P_2$ sind \emph{komponierbar}, falls $O_1\cap
  O_2=\emptyset$. Für solche \MIA{}s ist das Produkt $P_1\otimes
  P_2=((P_1\times P_2)\cup \{e_{12}\}, I, O, \must, \may, (p_{01}, p_{02}),
  e_{12})$ definiert mit:
  \begin{itemize}
    \item $e_{12}$: frischer universeller Zustand
    \item $I=(I_1\cup I_2)\backslash (O_1\cup O_2)$
    \item $O=(O_1\cup O_2)$
    \item $\must, \may$: kleinste Relationen, die die
      folgenden Regeln erfüllen:
    \begin{itemize}
      \item[(PMust1)] $(p_1,p_2)\must[\alpha] P_1'\times \{p_2\}$, falls
        $p_1\must[\alpha] P_1'$ und $\alpha\notin A_2$
      \item[(PMust2)] $(p_1,p_2)\must[\alpha] \{p_1\}\times P_2'$, falls
        $p_2\must[\alpha] P_2'$ und $\alpha\notin A_1$
      \item[(PMust3)] $(p_1,p_2)\must[a] P_1'\times P_2'$, falls
        $p_1\must[a] P_1'$ und $p_2\must[a] P_2'$
      \item[(PMay1)] $(p_1,p_2)\may[\alpha] P_1'\times \{p_2\}$, falls
        $p_1\may[\alpha] P_1'$ und $\alpha\notin A_2$
      \item[(PMay2)] $(p_1,p_2)\may[\alpha] \{p_1\}\times P_2'$, falls
        $p_2\may[\alpha] P_2'$ und $\alpha\notin A_1$
      \item[(PMay3)] $(p_1,p_2)\may[a] P_1'\times P_2'$, falls
        $p_1\may[a] P_1'$ und $p_2\may[a] P_2'$
    \end{itemize}
  \end{itemize}
\end{Def}

\begin{Def}[Parallelkomposition]
  Gegeben ein Parallelprodukt $P_1\otimes P_2$, ein Zustand $(p_1,p_2)$ ist ein
  neuer Kommunikationsfehler, falls es ein $a\in A_1\cap A_2$ gibt, sodass:
  \begin{itemize}
    \item[(a)] $a\in O_1, p_1\may[a]$ und $p_2\nmust[a]$ oder
    \item[(b)] $a\in O_2, p_2\may[a]$ und $p_1\nmust[a]$.
  \end{itemize}
  $(p_1,p_2)$ ist ein geerbter Kommunikationsfehler, falls eine der Komponenten
  ein universeller Zustand ist, d.h. $p_1=e_1\lor p_2=e_2$.\\
  $E\subseteq P_1\times P_2$ ist die Menge der unzulässigen Zustände. Es gilt
  $(p_1,p_2)\in E$, falls:
  \begin{itemize}
    \item[(i)] $(p_1,p_2)$ ist ein neuer oder geerbter Kommunikationsfehler,
    \item[(ii)] $(p_1,p_2)\may[w] (p_1',p_2')$ und $(p_1',p_2')\in E$.
      \TODO{$w\in O\cup \{\tau\}$ in Notation aufnehmen}
  \end{itemize}
  Falls der Startzustand ein unzulässiger Zustand ist, dann wird $e_{12}$
  initial und somit der einzig erreichbare Zustand von $P_1||P_2$ ($P_1$ und
  $P_2$ werden dann inkompatibel genannt).\\
  Sonst erhält man $P_1||P_2$ durch das prunen/abschneiden \TODO{Übersetzung
  überlegen} unzulässiger Zustände aus $P_1\otimes P_2$. Falls es einen Zustand
  $(p_1,p_2)\notin E$ mit $(p_1,p_2)\may[i](p_1',p_2')\in E$ für ein $i\in I$
  gibt, dann werden alle must- und may-Transitionen mit $i$ startend bei
  $(p_1,p_2)$ entfernt und eine einzige Transition $(p_1,p_2)\may[i]e_{12}$
  hinzugefügt. Zusätzlich werden alle Zustände aus $E$ und alle unerreichbaren
  Zustände (außer $e_{12}$) und alle ihre eingehenden und ausgehenden
  Transitionen gelöscht. Falls $(p_1,p_2)\in P_1||P_2$, schreiben wir
  $p_1||p_2$ und nennen $p_1$ und $p_2$ kompatiebel.
\end{Def}
